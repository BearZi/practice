<!doctype html>
<html>
<style type="text/css">
	ul {
		list-style: none;
		position: relative;
	}
	li {
		display: block;
		position: absolute;
	}
	li img {
		width: 100%;
	}
</style>



<body>
	<ul>
		<li><img src="./public/images/1.jpg"/></li>
		<li><img src="./public/images/2.jpg"/></li>
		<li><img src="./public/images/3.jpg"/></li>
		<li><img src="./public/images/4.jpg"/></li>
		<li><img src="./public/images/5.jpg"/></li>
		<li><img src="./public/images/6.jpg"/></li>
		<li><img src="./public/images/7.jpg"/></li>
	</ul>


<script type="text/javascript">
	var all_img = document.querySelectorAll('li > img'),
		all_li = document.querySelectorAll('li'),
		img_leng = all_img.length,
		check_img_load = 0,
		block_width,
		record,
		PosImg = function(){
			for (var i=0; i < img_leng; i++) {
				all_li[i].style.cssText = 'width:30%';
				//all_li[i].style.width = '30%';


				if (!i) {
					all_li[i].style.top = 0;
					all_li[i].style.left= 0;
					block_width = all_li[i].offsetWidth;
					record = Math.floor(i/3);
				} else if (i%3 > 0) {
					if (record) {
						record = Math.floor(i/3);
					} else if (record == Math.floor(i/3)) {
						all_li[i].style.top = 0;
						all_li[i].style.left = ((block_width + 20)*(i%3)) + 'px';
						console.log(((block_width + 20)*(i%3)));
					}
				} else {
					record = '';
					all_li[i].style.left = 0;
				}

			}
			console.log(block_width);
		};

	for (var i=0; i < img_leng; i++) {
		all_img[i].addEventListener('load', function (){
			check_img_load++;
			if (check_img_load === img_leng) {
				console.log('img loaded complete!!');

				PosImg();
				window.addEventListener('resize', PosImg, false);
			}
		}, false);
	}


</script>

</body>
</html>



